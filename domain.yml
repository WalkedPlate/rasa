version: "3.1"

intents:
  # ========== GLOBAL (funcionan siempre) ==========
  - greet
  - goodbye
  - menu_principal

  # ========== GLOBAL - CONSULTAS RÃPIDAS ESPECÃFICAS ==========
  - consulta_rapida_papeletas_placa
  - consulta_rapida_papeletas_dni
  - consulta_rapida_papeletas_ruc
  - consulta_rapida_codigo_falta

  # ========== NAVEGACIÃ“N A CONTEXTOS ==========
  - ir_a_casilla_mtc        # OpciÃ³n 1
  - ir_a_pagos_linea        # OpciÃ³n 2
  - ir_a_papeletas          # OpciÃ³n 3

  # ========== CONTEXTO PAPELETAS - CONSULTAS ESPECÃFICAS ==========
  - papeletas_consultar_placa
  - papeletas_consultar_dni
  - papeletas_consultar_ruc
  - papeletas_consultar_codigo_falta
  - papeletas_consultar_generico
  - papeletas_registrar
  - papeletas_facilidades
  - papeletas_frecuentes

  # ========== NAVEGACIÃ“N ==========
  - otra_consulta

entities:
  - placa
  - dni
  - ruc
  - codigo_falta

slots:
  # ========== SOLO PARA LOGGING ==========
  ultimo_documento:
    type: text
    influence_conversation: false
    mappings:
    - type: custom

responses:
  # ========== BÃSICOS ==========
  utter_greet:
  - text: |
      Â¡Hola! Soy el asistente virtual del SAT de Lima ğŸ‘‹
      
      Puedo ayudarte con **consultas rÃ¡pidas**. Puedes escribir directamente, por ejemplo:
      
      âš¡ **PAPELETAS:**
      â€¢ "Ver papeletas de mi placa ABC123" - para consultar las papeletas de una placa
      â€¢ "Consultar papeletas de mi DNI 12345678" - para consultar papeletas por DNI
      â€¢ "Papeletas del RUC 20123456789" - para consultar papeletas de una empresa
      â€¢ "Â¿QuÃ© significa el cÃ³digo C15?" - para conocer el significado de cÃ³digos de infracciÃ³n
      
      O si prefieres explorar las opciones completas:
      
      ğŸ“‹ **OPCIONES PRINCIPALES:**
      Escribe el nÃºmero o el nombre de la opciÃ³n que necesitas:
      1ï¸âƒ£ **Papeletas** - Multas y consultas de trÃ¡nsito
      2ï¸âƒ£ **Pagos** - Pagar por internet  
      3ï¸âƒ£ **Casilla MTC** - Registro obligatorio
      
      Â¿QuÃ© necesitas?

  utter_goodbye:
  - text: |
      Â¡Gracias por usar el SAT de Lima! ğŸ‘‹
      
      Recuerda que puedes:
      â€¢ Consultar papeletas: "Ver papeletas de mi placa ABC123"
      â€¢ InformaciÃ³n de pagos: "CÃ³mo pago por internet"
      â€¢ Registro MTC: "Necesito inscribirme"
      
      Â¡Que tengas buen dÃ­a! ğŸ˜Š

  utter_menu_principal:
  - text: |
      ğŸ“‹ **MENÃš PRINCIPAL SAT LIMA**

      âš¡ **CONSULTAS RÃPIDAS DE PAPELETAS:**
      â€¢ "Ver papeletas de mi placa ABC123"
      â€¢ "Consultar multas de mi DNI 12345678"
      â€¢ "Â¿QuÃ© significa el cÃ³digo C15?"

      ğŸ“‹ **OPCIONES PRINCIPALES:**
      1ï¸âƒ£ **Papeletas** - Multas y consultas de trÃ¡nsito
      2ï¸âƒ£ **Pagos** - Pagar por internet
      3ï¸âƒ£ **Casilla MTC** - Registro obligatorio

      Â¿QuÃ© necesitas?

  # ========== OPCIÃ“N 1: CASILLA MTC ==========
  utter_casilla_mtc:
  - text: |
      ğŸ“‹ **CASILLA ELECTRÃ“NICA MTC**

      Es **obligatorio** inscribirse para cualquier trÃ¡mite de trÃ¡nsito o transporte.

      ğŸ”— **RegÃ­strate aquÃ­:** https://casilla.mtc.gob.pe/#/registro

      **Â¿Por quÃ© es obligatorio?**
      â€¢ Para recibir notificaciones oficiales
      â€¢ Requisito para todos los trÃ¡mites vehiculares
      â€¢ Base Legal: R. Directoral NÂ°023-2024-MTC/18

      ğŸ“ **Ejemplos de lo que puedes decir despuÃ©s:**
      â€¢ "Ya me registrÃ©, ahora quiero ver mis papeletas"
      â€¢ "Â¿CÃ³mo pago mis multas?"
      â€¢ "Â¿QuÃ© otros trÃ¡mites puedo hacer?"

      **Â¿QuÃ© mÃ¡s necesitas?**
      â€¢ 'Papeletas' - Consultar multas
      â€¢ 'Pagos' - InformaciÃ³n de pagos
      â€¢ 'MenÃº principal' - Ver otras opciones

  # ========== OPCIÃ“N 2: PAGOS ==========
  utter_pagos_linea:
  - text: |
      ğŸ’³ **PAGAR POR INTERNET**

      ğŸ”— **PÃ¡gina de pagos:** https://www.sat.gob.pe/pagosenlinea/

      ğŸ’¡ **Puedes pagar con:**
      â€¢ Tarjetas: Visa, Mastercard, American Express
      â€¢ Yape
      â€¢ Bancos: BCP, Interbank, BBVA, Scotiabank

      ğŸ“ **Ejemplos de lo que puedes decir:**
      â€¢ "Â¿Puedo pagar en cuotas?"
      â€¢ "Quiero ver mis papeletas primero"
      â€¢ "Â¿DÃ³nde estÃ¡n las oficinas?"
      â€¢ "InformaciÃ³n sobre descuentos"

      **Â¿QuÃ© mÃ¡s necesitas?**
      â€¢ 'Papeletas' - Consultar cuÃ¡nto debes
      â€¢ 'Facilidades' - Pagar en cuotas
      â€¢ 'MenÃº principal' - Otras opciones

  # ========== OPCIÃ“N 3: PAPELETAS MENÃš ==========
  utter_papeletas_menu:
  - text: |
      ğŸš— **PAPELETAS - Â¿QuÃ© necesitas?**

      âš¡ **CONSULTA RÃPIDA AQUÃ:**
      Escribe directamente:
      â€¢ **Placa:** "Mi placa es ABC123" - para ver papeletas del vehÃ­culo
      â€¢ **DNI:** "Mi DNI es 12345678" o solo "87654321" - para consultar tus papeletas personales
      â€¢ **RUC:** "RUC 20123456789" - para papeletas de tu empresa
      â€¢ **CÃ³digo:** "Â¿QuÃ© significa G40?" o "CÃ³digo G41" - para entender quÃ© infracciÃ³n cometiste

      ğŸ“ **OTRAS OPCIONES:**
      â€¢ **"Registrar papeleta"** - Si no aparece tu multa
      â€¢ **"Facilidades de pago"** - Pagar en cuotas
      â€¢ **"Consultas frecuentes"** - Plazos, descuentos, etc.

      ğŸ’¡ **TambiÃ©n puedes preguntar:**
      â€¢ "Â¿Tengo multas pendientes?"
      â€¢ "No encuentro mi papeleta"
      â€¢ "Quiero pagar en cuotas"
      â€¢ "InformaciÃ³n sobre descuentos"

      Â¿QuÃ© necesitas?

  # ========== PAPELETAS SUB-OPCIONES ==========
  utter_papeletas_registrar:
  - text: |
      ğŸ“ **REGISTRAR PAPELETA NO ENCONTRADA**

      Si tu papeleta no aparece en el sistema:

      ğŸ”— **RegÃ­strala aquÃ­:** https://www.sat.gob.pe/websitev8/Popupv2.aspx?t=9&v=%20

      **Â¿Algo mÃ¡s?**
      â€¢ Dame tu placa/DNI/RUC para consultar otras papeletas
      â€¢ 'MenÃº principal' - Otras opciones
      â€¢ 'Papeletas' - Volver al menÃº de papeletas

  utter_papeletas_facilidades:
  - text: |
      ğŸ’° **FACILIDADES DE PAGO**

      **Para pagar en cuotas:**
      ğŸ”— **Agencia Virtual SAT:** https://www.sat.gob.pe/websitev9/Servicios/AgenciaVirtual

      **Pasos:**
      1. RegÃ­strate en Agencia Virtual
      2. Ve a 'Facilidades de pago'
      3. Selecciona tus papeletas para fraccionar

      âš ï¸ **Importante:** Primero inscrÃ­bete en Casilla MTC

      **Â¿Algo mÃ¡s?**
      â€¢ Dame tu placa/DNI/RUC para consultar papeletas
      â€¢ 'Casilla MTC' - InformaciÃ³n de registro
      â€¢ 'MenÃº principal' - Otras opciones

  utter_papeletas_frecuentes:
  - text: |
      â“ **CONSULTAS FRECUENTES PAPELETAS**

      ğŸ“‹ **Enlaces informativos:**

      ğŸ•’ **Plazos y descuentos:**
      https://www.sat.gob.pe/WebSiteV8/Modulos/contenidos/mult_Papeletas_ti_rntv2.aspx

      ğŸ“· **Ver imagen de papeleta:**
      https://www.sat.gob.pe/WebSitev8/IncioOV2.aspx

      ğŸ’¡ **Para consultar cÃ³digos de infracciÃ³n:**
      Escribe: "Â¿QuÃ© significa C15?" o "CÃ³digo M08"

      **Â¿Algo mÃ¡s?**
      â€¢ Dame tu placa/DNI/RUC para consultar papeletas
      â€¢ 'MenÃº principal' - Otras opciones

  # ========== NAVEGACIÃ“N GLOBAL ==========
  utter_otra_consulta:
  - text: |
      ğŸ”„ **NUEVA CONSULTA**

      **Â¿QuÃ© quieres consultar?**

      ğŸš— **Papeletas:** "Ver papeletas de mi placa ABC123"
      ğŸ’³ **Pagos:** "InformaciÃ³n de pagos"
      ğŸ“‹ **Casilla MTC:** "Necesito inscribirme"

      **O puedes decir:**
      â€¢ 'MenÃº principal' - Ver todas las opciones
      â€¢ "Â¿QuÃ© significa C15?" - Consultar cÃ³digos

      Â¿QuÃ© necesitas?

  # ========== FALLBACK GLOBAL ==========
  utter_default:
  - text: |
      No entendÃ­ completamente tu mensaje.

      **Puedes decir:**
      ğŸš— **Papeletas:** "Ver papeletas de mi placa ABC123"
      ğŸ’³ **Pagos:** "CÃ³mo pago por internet"
      ğŸ“‹ **Casilla MTC:** "Necesito inscribirme"
      ğŸ“‹ **MenÃº:** "MenÃº principal"

      **O consultar cÃ³digos:**
      â€¢ "Â¿QuÃ© significa C15?"

      Â¿QuÃ© necesitas?

actions:
  # ========== RESPONSES ESTÃTICAS ==========
  - utter_greet
  - utter_goodbye
  - utter_menu_principal
  - utter_casilla_mtc
  - utter_pagos_linea
  - utter_papeletas_menu
  - utter_papeletas_registrar
  - utter_papeletas_facilidades
  - utter_papeletas_frecuentes
  - utter_otra_consulta
  - utter_default

  # ========== CUSTOM ACTIONS ==========
  - action_consultar_papeletas
  - action_consultar_codigo_falta
  - action_finalizar_chat

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false