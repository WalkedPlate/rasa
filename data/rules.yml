version: "3.1"

rules:

# ========== REGLAS BÁSICAS ==========
- rule: Saludo inicial
  steps:
  - intent: greet
  - action: utter_greet

- rule: Despedida
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Mostrar menú principal
  steps:
  - intent: menu_principal
  - action: utter_menu_principal

# ========== CONSULTAS RÁPIDAS ESPECÍFICAS (GLOBAL) ==========
- rule: Consulta rápida papeletas con placa
  steps:
  - intent: consulta_rapida_papeletas_placa
  - action: action_consultar_papeletas

- rule: Consulta rápida papeletas con DNI
  steps:
  - intent: consulta_rapida_papeletas_dni
  - action: action_consultar_papeletas

- rule: Consulta rápida papeletas con RUC
  steps:
  - intent: consulta_rapida_papeletas_ruc
  - action: action_consultar_papeletas

- rule: Consulta rápida código de falta
  steps:
  - intent: consulta_rapida_codigo_falta
  - action: action_consultar_codigo_falta

- rule: Consulta rápida impuestos con placa
  steps:
  - intent: consulta_rapida_impuestos_placa
  - action: action_consultar_impuestos

- rule: Consulta rápida impuestos con DNI
  steps:
  - intent: consulta_rapida_impuestos_dni
  - action: action_consultar_impuestos

- rule: Consulta rápida impuestos con RUC
  steps:
  - intent: consulta_rapida_impuestos_ruc
  - action: action_consultar_impuestos

- rule: Consulta rápida impuestos con código contribuyente
  steps:
  - intent: consulta_rapida_impuestos_codigo
  - action: action_consultar_impuestos

# ========== NAVEGACIÓN A CONTEXTOS ==========
- rule: Ir a Casilla MTC
  steps:
  - intent: ir_a_casilla_mtc
  - action: utter_casilla_mtc

- rule: Ir a Pagos en línea
  steps:
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

- rule: Ir a Papeletas
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu

- rule: Ir a Impuestos
  steps:
  - intent: ir_a_impuestos
  - action: utter_impuestos_menu

# ========== CONTEXTO PAPELETAS - CONSULTAS ESPECÍFICAS ==========
- rule: Papeletas - Consultar con placa
  steps:
  - intent: papeletas_consultar_placa
  - action: action_consultar_papeletas

- rule: Papeletas - Consultar con DNI
  steps:
  - intent: papeletas_consultar_dni
  - action: action_consultar_papeletas

- rule: Papeletas - Consultar con RUC
  steps:
  - intent: papeletas_consultar_ruc
  - action: action_consultar_papeletas

- rule: Papeletas - Consultar código de falta
  steps:
  - intent: papeletas_consultar_codigo_falta
  - action: action_consultar_codigo_falta

- rule: Papeletas - Consultar genérico
  steps:
  - intent: papeletas_consultar_generico
  - action: action_consultar_papeletas

- rule: Papeletas - Registrar
  steps:
  - intent: papeletas_registrar
  - action: utter_papeletas_registrar

- rule: Papeletas - Facilidades
  steps:
  - intent: papeletas_facilidades
  - action: utter_papeletas_facilidades

- rule: Papeletas - Frecuentes
  steps:
  - intent: papeletas_frecuentes
  - action: utter_papeletas_frecuentes

# ========== CONTEXTO IMPUESTOS - CONSULTAS ESPECÍFICAS ==========
- rule: Impuestos - Consultar con placa
  steps:
  - intent: impuestos_consultar_placa
  - action: action_consultar_impuestos

- rule: Impuestos - Consultar con DNI
  steps:
  - intent: impuestos_consultar_dni
  - action: action_consultar_impuestos

- rule: Impuestos - Consultar con RUC
  steps:
  - intent: impuestos_consultar_ruc
  - action: action_consultar_impuestos

- rule: Impuestos - Consultar con código contribuyente
  steps:
  - intent: impuestos_consultar_codigo
  - action: action_consultar_impuestos

- rule: Impuestos - Consultar genérico
  steps:
  - intent: impuestos_consultar_generico
  - action: action_consultar_impuestos

# ========== CONTEXTO IMPUESTOS - CUADERNILLO TRIBUTARIO ==========
- rule: Impuestos - Cuadernillo genérico
  steps:
  - intent: impuestos_cuadernillo
  - action: action_cuadernillo_agencia_virtual

- rule: Impuestos - Cuadernillo agencia virtual
  steps:
  - intent: impuestos_cuadernillo_agencia_virtual
  - action: action_cuadernillo_agencia_virtual

- rule: Impuestos - Cuadernillo predial
  steps:
  - intent: impuestos_cuadernillo_predial
  - action: action_cuadernillo_predial

- rule: Impuestos - Cuadernillo vehicular
  steps:
  - intent: impuestos_cuadernillo_vehicular
  - action: action_cuadernillo_vehicular

# ========== CONTEXTO IMPUESTOS - DECLARE Y LIQUIDE ==========
- rule: Impuestos - Declare y liquide genérico
  steps:
  - intent: impuestos_declarar_liquide
  - action: action_declaracion_impuesto_vehicular

- rule: Impuestos - Declaración vehicular
  steps:
  - intent: impuestos_declarar_vehicular
  - action: action_declaracion_impuesto_vehicular

- rule: Impuestos - Declaración predial
  steps:
  - intent: impuestos_declarar_predial
  - action: action_declaracion_impuesto_predial

- rule: Impuestos - Liquidación alcabala
  steps:
  - intent: impuestos_liquidar_alcabala
  - action: action_liquidacion_alcabala

- rule: Impuestos - Fraccionar deuda
  steps:
  - intent: impuestos_fraccionar_deuda
  - action: action_fraccionar_deuda

# ========== CONTEXTO IMPUESTOS - BENEFICIOS ==========
- rule: Impuestos - Beneficios genérico
  steps:
  - intent: impuestos_beneficios
  - action: action_beneficios_pensionista

- rule: Impuestos - Beneficios pensionista
  steps:
  - intent: impuestos_beneficios_pensionista
  - action: action_beneficios_pensionista

- rule: Impuestos - Beneficios adulto mayor
  steps:
  - intent: impuestos_beneficios_adulto_mayor
  - action: action_beneficios_adulto_mayor


# ========== NAVEGACIÓN A RETENCIÓN ==========
- rule: Ir a Retención y Captura
  steps:
  - intent: ir_a_retencion_captura
  - action: utter_retencion_menu

# ========== CONTEXTO RETENCIÓN - SUB-OPCIONES ==========
- rule: Retención - Embargo de cuentas
  steps:
  - intent: retencion_embargo_cuentas
  - action: action_retencion_embargo

- rule: Retención - Orden de captura
  steps:
  - intent: retencion_orden_captura
  - action: action_consultar_orden_captura

- rule: Retención - Vehículo internado
  steps:
  - intent: retencion_vehiculo_internado
  - action: action_retencion_vehiculo_internado

- rule: Retención - Suspender cobranza
  steps:
  - intent: retencion_suspender_cobranza
  - action: action_retencion_suspender_cobranza

- rule: Retención - Tercería de propiedad
  steps:
  - intent: retencion_terceria_propiedad
  - action: action_retencion_terceria_propiedad

- rule: Retención - Levantamiento
  steps:
  - intent: retencion_levantamiento
  - action: action_retencion_levantamiento

- rule: Retención - Remate vehicular
  steps:
  - intent: retencion_remate_vehicular
  - action: action_retencion_remate_vehicular

- rule: Retención - Consultar con placa
  steps:
  - intent: retencion_consultar_placa
  - action: action_consultar_orden_captura

# ========== NAVEGACIÓN A ACTUALIZAR DATPS ==========
- rule: Ir a Actualizar Datos
  steps:
  - intent: ir_a_actualizar_datos
  - action: action_actualizar_datos

# ========== NAVEGACIÓN GLOBAL ==========
- rule: Otra consulta
  steps:
  - intent: otra_consulta
  - action: utter_otra_consulta

# ========== FALLBACK GLOBAL ==========
- rule: Fallback
  steps:
  - intent: nlu_fallback
  - action: utter_default