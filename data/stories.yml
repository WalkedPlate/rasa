version: "3.1"

stories:

# ========== FLUJOS BÁSICOS ==========
- story: Saludo y despedida simple
  steps:
  - intent: greet
  - action: utter_greet
  - intent: goodbye
  - action: utter_goodbye

- story: Saludo y menú principal
  steps:
  - intent: greet
  - action: utter_greet
  - intent: menu_principal
  - action: utter_menu_principal

# ========== CONSULTAS RÁPIDAS ESPECÍFICAS ==========
- story: Consulta rápida papeletas con RUC directo
  steps:
  - intent: consulta_rapida_papeletas_ruc
    entities:
    - ruc: "20123456789"
  - action: action_consultar_papeletas

- story: Consulta rápida código de falta directo
  steps:
  - intent: consulta_rapida_codigo_falta
    entities:
    - codigo_falta: "C15"
  - action: action_consultar_codigo_falta

- story: Multiple consultas rápidas
  steps:
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: consulta_rapida_papeletas_dni
    entities:
    - dni: "12345678"
  - action: action_consultar_papeletas

# ========== NAVEGACIÓN ENTRE OPCIONES ==========
- story: De saludo a casilla MTC
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ir_a_casilla_mtc
  - action: utter_casilla_mtc

- story: De casilla MTC a pagos
  steps:
  - intent: ir_a_casilla_mtc
  - action: utter_casilla_mtc
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

- story: De pagos a papeletas
  steps:
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu

- story: Navegación con menú principal
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: menu_principal
  - action: utter_menu_principal
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

# ========== FLUJO PAPELETAS COMPLETO ==========
- story: Entrada a papeletas y consulta genérica
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_generico
  - action: action_consultar_papeletas

- story: Papeletas con placa específica en contexto
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas

- story: Papeletas con DNI en contexto
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_dni
    entities:
    - dni: "12345678"
  - action: action_consultar_papeletas

- story: Papeletas - registrar
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_registrar
  - action: utter_papeletas_registrar

- story: Papeletas - facilidades
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_facilidades
  - action: utter_papeletas_facilidades

- story: Papeletas - consultas frecuentes
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_frecuentes
  - action: utter_papeletas_frecuentes

- story: Papeletas - código en contexto
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_codigo_falta
    entities:
    - codigo_falta: "G40"
  - action: action_consultar_codigo_falta

# ========== CAMBIOS DE CONTEXTO ==========
- story: De papeletas a pagos
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

- story: De papeletas consulta a casilla MTC
  steps:
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: ir_a_casilla_mtc
  - action: utter_casilla_mtc

- story: De código a consulta papeletas
  steps:
  - intent: consulta_rapida_codigo_falta
    entities:
    - codigo_falta: "C15"
  - action: action_consultar_codigo_falta
  - intent: consulta_rapida_papeletas_dni
    entities:
    - dni: "87654321"
  - action: action_consultar_papeletas

# ========== USO DE NAVEGACIÓN GLOBAL ==========
- story: Usar otra consulta después de resultado
  steps:
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: otra_consulta
  - action: utter_otra_consulta

- story: Otra consulta desde papeletas a pagos
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: otra_consulta
  - action: utter_otra_consulta
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

# ========== FLUJOS LARGOS REALISTAS ==========
- story: Usuario explorador completo
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea
  - intent: otra_consulta
  - action: utter_otra_consulta
  - intent: consulta_rapida_papeletas_dni
    entities:
    - dni: "12345678"
  - action: action_consultar_papeletas

- story: Usuario con múltiples consultas específicas
  steps:
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: consulta_rapida_codigo_falta
    entities:
    - codigo_falta: "C15"
  - action: action_consultar_codigo_falta
  - intent: consulta_rapida_papeletas_ruc
    entities:
    - ruc: "20123456789"
  - action: action_consultar_papeletas
  - intent: ir_a_pagos_linea
  - action: utter_pagos_linea

- story: Usuario empresa completo
  steps:
  - intent: greet
  - action: utter_greet
  - intent: consulta_rapida_papeletas_ruc
    entities:
    - ruc: "20123456789"
  - action: action_consultar_papeletas
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "DEF456"
  - action: action_consultar_papeletas
  - intent: papeletas_facilidades
  - action: utter_papeletas_facilidades

# ========== FLUJOS CON FALLBACK Y RECUPERACIÓN ==========
- story: Usuario perdido que se recupera
  steps:
  - intent: greet
  - action: utter_greet
  - intent: nlu_fallback
  - action: utter_default
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_dni
    entities:
    - dni: "12345678"
  - action: action_consultar_papeletas

- story: Navegación después de fallback
  steps:
  - intent: nlu_fallback
  - action: utter_default
  - intent: menu_principal
  - action: utter_menu_principal
  - intent: consulta_rapida_codigo_falta
    entities:
    - codigo_falta: "M08"
  - action: action_consultar_codigo_falta

# ========== FLUJOS DE NAVEGACIÓN ENTRE SECCIONES ==========
- story: De facilidades a consulta
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_facilidades
  - action: utter_papeletas_facilidades
  - intent: papeletas_consultar_dni
    entities:
    - dni: "87654321"
  - action: action_consultar_papeletas

- story: De frecuentes a código
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_frecuentes
  - action: utter_papeletas_frecuentes
  - intent: papeletas_consultar_codigo_falta
    entities:
    - codigo_falta: "A05"
  - action: action_consultar_codigo_falta

# ========== CASOS ESPECÍFICOS DE DEBUGGING ==========
- story: Placa directa en contexto papeletas - caso APS583
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "APS583"
  - action: action_consultar_papeletas

- story: Multiple placas directas en contexto
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: papeletas_consultar_placa
    entities:
    - placa: "APS583"
  - action: action_consultar_papeletas

- story: DNI directo en contexto papeletas
  steps:
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_dni
    entities:
    - dni: "87654321"
  - action: action_consultar_papeletas

# ========== FLUJOS DE FINALIZACIÓN ==========
- story: Consulta y despedida
  steps:
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas
  - intent: goodbye
  - action: utter_goodbye

- story: Navegación completa y finalización
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ir_a_casilla_mtc
  - action: utter_casilla_mtc
  - intent: ir_a_papeletas
  - action: utter_papeletas_menu
  - intent: papeletas_consultar_placa
    entities:
    - placa: "XYZ789"
  - action: action_consultar_papeletas
  - intent: goodbye
  - action: utter_goodbye

- story: Consulta rápida papeletas con placa desde inicio
  steps:
  - intent: greet
  - action: utter_greet
  - intent: consulta_rapida_papeletas_placa
    entities:
    - placa: "ABC123"
  - action: action_consultar_papeletas

- story: Consulta rápida papeletas con DNI directo
  steps:
  - intent: consulta_rapida_papeletas_dni
    entities:
    - dni: "12345678"
  - action: action_consultar_papeletas