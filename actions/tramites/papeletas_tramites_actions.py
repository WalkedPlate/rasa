"""
Actions para tr√°mites administrativos de papeletas
"""
from typing import Any, Text, Dict, List
from rasa_sdk import Action, Tracker
from rasa_sdk.executor import CollectingDispatcher
import logging

logger = logging.getLogger(__name__)


class ActionTramitesRecursoReconsideracion(Action):
    """Action para recurso de reconsideraci√≥n de papeletas"""

    def name(self) -> Text:
        return "action_tramites_recurso_reconsideracion"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para recurso de reconsideraci√≥n")

        message = """üìã **REQUISITOS PARA RECURSO DE RECONSIDERACI√ìN EN MATERIA DE TR√ÅNSITO Y TRANSPORTE**

1. **Presentar escrito fundamentado consignando lo siguiente:**
   a) Nombres y apellidos o denominaci√≥n o raz√≥n social, n√∫mero de documento de identidad o n√∫mero de RUC del solicitante y de su representante, de ser el caso.
   b) Domicilio del solicitante.
   c) Expresi√≥n concreta de lo pedido, se√±alando el n√∫mero del documento impugnado.
   d) Fundamentos de hecho y derecho.
   e) Firma o huella digital (en caso de no saber firmar o estar impedido) del solicitante o representante de ser caso.

2. **Adjuntar nueva prueba.** En caso no se cumpla con adjuntar nueva prueba o esta no califique como tal, este procedimiento ser√° tramitado como recurso de apelaci√≥n, de acuerdo a lo se√±alado en el art√≠culo 213¬∞ de la Ley 27444, Ley de Procedimiento Administrativo General.

3. **En caso el tr√°mite fuera presentado por un representante,** adjuntar Carta Poder Simple con firma del administrado o designaci√≥n de persona cierta debidamente identificada en el escrito.

üìã **Fuente:** TUPA - SAT de Lima (Decreto de Alcald√≠a N¬∞ 0008 ‚Äì 28/08/2018).

üìã **Ingrese su tr√°mite por Mesa de Partes Digital:**
üìå https://www.sat.gob.pe/MesaPartesDigital

‚ö†Ô∏è **Para iniciar un procedimiento administrativo vinculado a tr√°nsito o transporte, es obligatorio inscribirse en la Casilla Electr√≥nica del MTC, as√≠ recibir√°s oportunamente nuestras comunicaciones.**
üìå https://casilla.mtc.gob.pe/#/registro

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesDescargaInfracciones(Action):
    """Action para descarga de infracciones"""

    def name(self) -> Text:
        return "action_tramites_descarga_infracciones"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando informaci√≥n para descarga de infracciones")

        message = """üìã **DESCARGA DE INFRACCIONES**

Puede realizarlo por nuestra **Agencia Virtual SAT**:

üîó **Para registrarse:**
üìå https://www.sat.gob.pe/websitev9/Servicios/AgenciaVirtual

**Pasos:**
1. Registrarse en Agencia Virtual
2. Ingresar en la opci√≥n "Facilidades de pago"
3. Seguir el procedimiento indicado

‚ö†Ô∏è **Para iniciar un procedimiento administrativo vinculado a tr√°nsito o transporte, es obligatorio inscribirse en la Casilla Electr√≥nica del MTC, as√≠ recibir√°s oportunamente nuestras comunicaciones.**
üìå https://casilla.mtc.gob.pe/#/registro

üìã **Base Legal:** R. Directoral N¬∞023-2024-MTC/18

üîó **Gu√≠a interactiva del procedimiento:**
üìå https://www.sat.gob.pe/AgenciaVirtual/guiainteractiva/

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Agencia Virtual' - Informaci√≥n sobre registro
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesApelacionPapeletas(Action):
    """Action para apelaci√≥n de papeletas"""

    def name(self) -> Text:
        return "action_tramites_apelacion_papeletas"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para apelaci√≥n de papeletas")

        message = """üìã **RECURSO DE APELACI√ìN DE PAPELETAS**

Para verificar los requisitos detallados:

üîó **Requisitos completos:**
üìå https://www.sat.gob.pe/WebSiteV9/Tramites/TramitesTUPA/TUPA

üìã **Descargue y consulte el llenado del formato:**
üìå https://www.sat.gob.pe/WebSiteV8/Modulos/Tramites/TramitesAdministv2.aspx

üìã **Puede ingresar su tr√°mite por Mesa de Partes Digital:**
üìå https://www.sat.gob.pe/MesaPartesDigital

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Recurso reconsideraci√≥n' - Alternativa antes de apelar
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesPrescripcionPapeletas(Action):
    """Action para prescripci√≥n de papeletas"""

    def name(self) -> Text:
        return "action_tramites_prescripcion_papeletas"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para prescripci√≥n de papeletas")

        message = """üìã **REQUISITOS PARA LA SOLICITUD DE PRESCRIPCI√ìN EN MATERIA DE TR√ÅNSITO, MULTAS DE TRANSPORTE Y MULTAS ADMINISTRATIVAS**

‚è∞ **El plazo para prescripci√≥n de las multas por infracciones al Reglamento Nacional de Tr√°nsito es de dos a√±os computados a partir de la firmeza de la Resoluci√≥n de Sanci√≥n.**

**REQUISITOS:**
1. **Presentar solicitud seg√∫n formato publicado por el SAT** conteniendo lo siguiente:
   a) Nombres y apellidos o denominaci√≥n o raz√≥n social, n√∫mero de documento de identidad o n√∫mero de RUC del solicitante y de su representante, de ser el caso.
   b) Domicilio del solicitante.
   c) Indicar la obligaci√≥n cuya prescripci√≥n se invoca.
   d) Firma o huella digital (en caso de no saber firmar o estar impedido) del solicitante o representante, de ser el caso.

2. **En caso el tr√°mite fuera presentado por un representante,** deber√° presentar Carta Poder Simple con firma del administrado o designaci√≥n de persona cierta debidamente identificada en el escrito.

üìã **Ingrese su tr√°mite por Mesa de Partes Digital:**
üìå https://www.sat.gob.pe/MesaPartesDigital

‚ö†Ô∏è **Para iniciar un procedimiento administrativo vinculado a tr√°nsito o transporte, es obligatorio inscribirse en la Casilla Electr√≥nica del MTC, as√≠ recibir√°s oportunamente nuestras comunicaciones.**
üìå https://casilla.mtc.gob.pe/#/registro

üìã **Base Legal:** R. Directoral N¬∞023-2024-MTC/18
üìã **Fuente:** TUPA - SAT de Lima (Decreto de Alcald√≠a N¬∞ 0008 28/08/2018).

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesDevolucionPapeletas(Action):
    """Action para devoluci√≥n y/o compensaci√≥n de papeletas"""

    def name(self) -> Text:
        return "action_tramites_devolucion_papeletas"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para devoluci√≥n de papeletas")

        message = """üìã **DEVOLUCI√ìN Y/O COMPENSACI√ìN DE PAPELETAS**

‚ö†Ô∏è **Para iniciar un procedimiento administrativo vinculado a tr√°nsito o transporte, es obligatorio inscribirse en la Casilla Electr√≥nica del MTC, as√≠ recibir√°s oportunamente nuestras comunicaciones.**
üìå https://casilla.mtc.gob.pe/#/registro

üìã **Base Legal:** R. Directoral N¬∞023-2024-MTC/18

Espero que la informaci√≥n brindada le haya sido √∫til.

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesTerceriaRequisitos(Action):
    """Action para tercer√≠a de propiedad (requisitos papeletas)"""

    def name(self) -> Text:
        return "action_tramites_terceria_requisitos"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para tercer√≠a de propiedad (papeletas)")

        message = """üìã **TERCER√çA DE PROPIEDAD - REQUISITOS ADMINISTRATIVOS**

Para verificar los requisitos detallados:

üîó **Requisitos completos:**
üìå https://www.sat.gob.pe/WebSiteV9/Tramites/TramitesTUPA/TUPA

üìã **Descargue y consulte el llenado del formato:**
üìå https://www.sat.gob.pe/WebSiteV8/Modulos/Tramites/TramitesAdministv2.aspx

üìã **Puede ingresar su tr√°mite por Mesa de Partes Digital:**
üìå https://www.sat.gob.pe/MesaPartesDigital

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []


class ActionTramitesSuspensionRequisitos(Action):
    """Action para suspensi√≥n de cobranza coactiva (requisitos papeletas)"""

    def name(self) -> Text:
        return "action_tramites_suspension_requisitos"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        logger.info("Mostrando requisitos para suspensi√≥n de cobranza (papeletas)")

        message = """üìã **SOLICITUD DE SUSPENSI√ìN DE COBRANZA COACTIVA - REQUISITOS ADMINISTRATIVOS**

üìù **REQUISITOS:**
1. **Formato de solicitud** debidamente llenado y firmado. En casos de deuda no tributaria un formato por cada deuda.
2. **Indicar el domicilio** real o procesal dentro del radio urbano de la provincia de Lima.
3. **En caso de representaci√≥n,** poder espec√≠fico en documento p√∫blico o privado con firma legalizada ante notario o certificada por fedatario del SAT.
4. **Marcar la causal** seg√∫n el formato y adjuntar los sustentos correspondientes.

üîó **Directiva N¬∞ 001-006-00000023:**
üìå https://www.sat.gob.pe/WebSiteV8/Modulos/documentos/TUPA/Directiva_001-006-000000023_aprobada_por_RJ_001-004-00003951.pdf

üìã **Descargue y consulte el llenado del formato:**
üìå https://www.sat.gob.pe/WebSiteV8/Modulos/Tramites/TramitesAdministv2.aspx

üìã **Ingrese su tr√°mite por Mesa de Partes Digital:**
üìå https://www.sat.gob.pe/MesaPartesDigital

**¬øQu√© m√°s necesitas?**
‚Ä¢ 'Requisitos papeletas' - Ver otros tr√°mites de papeletas
‚Ä¢ 'Otros tr√°mites' - Volver al men√∫ principal de tr√°mites
‚Ä¢ 'Men√∫ principal' - Otras opciones"""

        dispatcher.utter_message(text=message)
        return []